{"version":3,"file":"index-DUM-JWaD.js","sources":["../../src/main.ts"],"sourcesContent":["// Entry point for Super Fancy Market News (Vite + TypeScript)\r\n// Full app behavior from the original HTML file will be migrated here in the next step.\r\n\r\nconsole.log('Super Fancy Market News (Vite + TS) loaded');\r\n\r\n// Summarizer Worker endpoint (same as original HTML app)\r\nconst SUMMARIZER_URL = 'https://summarizev3.451jscholz.workers.dev/summarize';\r\nconst TRENDING_URL = 'https://summarizev3.451jscholz.workers.dev/reddit-trending';\r\n\r\n// Basic security guard: redirect to HTTPS in production and try to avoid hostile iframes\r\nif (typeof window !== 'undefined') {\r\n  const { protocol, hostname } = window.location;\r\n  if (\r\n    protocol === 'http:' &&\r\n    hostname !== 'localhost' &&\r\n    !hostname.startsWith('127.')\r\n  ) {\r\n    const { host, pathname, search, hash } = window.location;\r\n    window.location.replace(`https://${host}${pathname}${search}${hash}`);\r\n  }\r\n\r\n  if (window.top && window.top !== window.self) {\r\n    try {\r\n      window.top.location.href = window.location.href;\r\n    } catch {\r\n      // Ignore if we can't break out\r\n    }\r\n  }\r\n}\r\n\r\n// Simple banner behavior when opened from file:// (mirrors original app)\r\nif (typeof window !== 'undefined' && window.location.protocol === 'file:') {\r\n  const banner = document.getElementById('banner');\r\n  if (banner) {\r\n    banner.style.display = 'block';\r\n    banner.textContent = 'Opened locally (for best experience, run via Vite dev server over http://localhost)';\r\n  }\r\n}\r\n\r\n// Minimal Finnhub key storage wiring (step 1)\r\nconst keyInput = document.getElementById('keyFinnhub') as HTMLInputElement | null;\r\nconst saveButton = document.getElementById('btnSave') as HTMLButtonElement | null;\r\nconst pillKey = document.getElementById('pillKey') as HTMLSpanElement | null;\r\n\r\nfunction setKeyPill(text: string, ok: boolean) {\r\n  if (!pillKey) return;\r\n  pillKey.textContent = text;\r\n  pillKey.classList.remove('ok', 'err');\r\n  pillKey.classList.add(ok ? 'ok' : 'err');\r\n}\r\n\r\nif (keyInput) {\r\n  const stored = localStorage.getItem('sns_finnhub_key') || '';\r\n  keyInput.value = stored;\r\n  setKeyPill(stored ? 'Saved' : 'Not saved', !!stored);\r\n}\r\n\r\nif (saveButton && keyInput) {\r\n  saveButton.addEventListener('click', () => {\r\n    const v = keyInput.value.trim();\r\n    localStorage.setItem('sns_finnhub_key', v);\r\n    setKeyPill(v ? 'Saved' : 'Not saved', !!v);\r\n  });\r\n}\r\n\r\n// ================== Helpers for search / UI ==================\r\nfunction setStatus(message: string) {\r\n  const statusEl = document.getElementById('status');\r\n  if (statusEl) statusEl.textContent = message;\r\n}\r\n\r\nfunction setCount(n: number) {\r\n  const countEl = document.getElementById('count');\r\n  if (countEl) countEl.textContent = n ? `${n} article${n === 1 ? '' : 's'}` : '';\r\n}\r\n\r\nfunction isTicker(q: string): boolean {\r\n  return /^[A-Z.\\-]{1,7}$/.test(String(q || '').trim());\r\n}\r\n\r\nfunction niceTime(iso?: string): string {\r\n  if (!iso) return '';\r\n  const d = new Date(iso);\r\n  return Number.isNaN(d.getTime()) ? '' : d.toLocaleString();\r\n}\r\n\r\nfunction appendLog(msg: string, cls = '') {\r\n  const logEl = document.getElementById('log');\r\n  if (!logEl) return;\r\n  const div = document.createElement('div');\r\n  if (cls) div.className = cls;\r\n  div.textContent = msg;\r\n  logEl.appendChild(div);\r\n}\r\n\r\nfunction clearLog() {\r\n  const logEl = document.getElementById('log');\r\n  if (logEl) logEl.innerHTML = '';\r\n}\r\n\r\n// ================== Summary text helpers ==================\r\nfunction decodeEntities(str: unknown): string {\r\n  const txt = document.createElement('textarea');\r\n  txt.innerHTML = (str ?? '').toString();\r\n  return txt.value;\r\n}\r\n\r\nfunction cleanText(raw: unknown): string {\r\n  if (!raw) return '';\r\n  let s = String(raw).trim();\r\n  // Strip ```json fences if present\r\n  s = s.replace(/^```(?:json)?\\s*/i, '').replace(/```$/, '').trim();\r\n  // Try to pull .summary from JSON if the worker wrapped it\r\n  try {\r\n    const maybe = JSON.parse(s) as any;\r\n    if (maybe && typeof maybe === 'object' && (maybe.summary || maybe.Summary)) {\r\n      s = String(maybe.summary || maybe.Summary || '');\r\n    }\r\n  } catch {\r\n    // ignore JSON parse errors\r\n  }\r\n  // Strip leading/trailing quotes\r\n  s = s.replace(/^\"(.*)\"$/, '$1').replace(/^'(.*)'$/, '$1').trim();\r\n  return decodeEntities(s);\r\n}\r\n\r\nfunction cleanBullet(b: unknown): string {\r\n  let s = cleanText(b);\r\n  s = s.replace(/^\\s*[-â€¢]\\s*/, '').trim();\r\n  return s;\r\n}\r\n\r\nfunction coerceBullets(raw: unknown): string[] {\r\n  if (!raw) return [];\r\n  if (Array.isArray(raw)) return raw.map(cleanBullet).filter(Boolean);\r\n  if (typeof raw === 'string') {\r\n    return cleanText(raw)\r\n      .split(/\\r?\\n+/)\r\n      .map((x) => x.replace(/^\\s*[-â€¢]\\s*/, '').trim())\r\n      .filter(Boolean);\r\n  }\r\n  if (typeof raw === 'object') {\r\n    const anyRaw = raw as any;\r\n    if (Array.isArray(anyRaw.bullets)) return anyRaw.bullets.map(cleanBullet).filter(Boolean);\r\n    const vals = Object.values(anyRaw).filter((v) => typeof v === 'string');\r\n    if (vals.length) return vals.map(cleanBullet).filter(Boolean);\r\n  }\r\n  return [];\r\n}\r\n\r\n// ================== Types & rendering for news ==================\r\ninterface NewsItem {\r\n  title: string;\r\n  url: string;\r\n  source: string;\r\n  description: string;\r\n  publishedAt: string;\r\n}\r\n\r\nfunction dedupeNews(items: NewsItem[], mode: 'url' | 'title' | 'off'): NewsItem[] {\r\n  if (mode === 'off') return items;\r\n  const out: NewsItem[] = [];\r\n  const seen = new Set<string>();\r\n\r\n  for (const it of items) {\r\n    let key: string;\r\n    if (mode === 'url' && it.url) {\r\n      try {\r\n        const u = new URL(it.url);\r\n        key = `${u.origin}${u.pathname}`;\r\n      } catch {\r\n        key = it.url;\r\n      }\r\n    } else {\r\n      key = `${it.title}|${it.source}`;\r\n    }\r\n    if (!seen.has(key)) {\r\n      seen.add(key);\r\n      out.push(it);\r\n    }\r\n  }\r\n  return out;\r\n}\r\n\r\nfunction renderNews(items: NewsItem[]) {\r\n  const results = document.getElementById('results');\r\n  if (!results) return;\r\n\r\n  results.innerHTML = '';\r\n  if (!items.length) {\r\n    const div = document.createElement('div');\r\n    div.className = 'item';\r\n    div.textContent = 'No articles found.';\r\n    results.appendChild(div);\r\n    setCount(0);\r\n    return;\r\n  }\r\n\r\n  const sortSelect = document.getElementById('sort') as HTMLSelectElement | null;\r\n  const sorted = [...items];\r\n  const sortMode = sortSelect?.value || 'relevance';\r\n\r\n  if (sortMode === 'time') {\r\n    sorted.sort((a, b) => new Date(b.publishedAt).getTime() - new Date(a.publishedAt).getTime());\r\n  }\r\n\r\n  for (const it of sorted) {\r\n    const itemDiv = document.createElement('div');\r\n    itemDiv.className = 'item';\r\n\r\n    const meta = document.createElement('div');\r\n    const datePill = document.createElement('span');\r\n    datePill.className = 'pill';\r\n    datePill.textContent = niceTime(it.publishedAt);\r\n    const sourcePill = document.createElement('span');\r\n    sourcePill.className = 'pill';\r\n    sourcePill.textContent = it.source || 'News';\r\n\r\n    meta.appendChild(datePill);\r\n    meta.appendChild(sourcePill);\r\n\r\n    const titleDiv = document.createElement('div');\r\n    const link = document.createElement('a');\r\n    link.href = it.url || '#';\r\n    link.target = '_blank';\r\n    link.rel = 'noopener noreferrer';\r\n    link.textContent = it.title || '(no title)';\r\n    titleDiv.appendChild(link);\r\n\r\n    itemDiv.appendChild(meta);\r\n    itemDiv.appendChild(titleDiv);\r\n\r\n    if (it.description) {\r\n      const desc = document.createElement('div');\r\n      desc.style.color = '#94a3b8';\r\n      desc.style.marginTop = '6px';\r\n      desc.textContent = it.description;\r\n      itemDiv.appendChild(desc);\r\n    }\r\n\r\n    // Summary container + button\r\n    const summaryBox = document.createElement('div');\r\n    summaryBox.className = 'summary-box';\r\n    const summaryButton = document.createElement('button');\r\n    summaryButton.className = 'ghost';\r\n    summaryButton.style.marginTop = '8px';\r\n    summaryButton.textContent = 'Summarize';\r\n    summaryButton.addEventListener('click', () => {\r\n      void summarizeItem(it, summaryBox, summaryButton);\r\n    });\r\n\r\n    const summaryRow = document.createElement('div');\r\n    summaryRow.appendChild(summaryButton);\r\n    itemDiv.appendChild(summaryRow);\r\n    itemDiv.appendChild(summaryBox);\r\n\r\n    results.appendChild(itemDiv);\r\n  }\r\n\r\n  setCount(items.length);\r\n}\r\n\r\n// ================== Summarizer Worker integration ==================\r\nasync function summarizeItem(item: NewsItem, box: HTMLDivElement, btn: HTMLButtonElement): Promise<void> {\r\n  try {\r\n    btn.disabled = true;\r\n    btn.textContent = 'Summarizingâ€¦';\r\n    box.innerHTML = '';\r\n\r\n    const payload = {\r\n      url: item.url,\r\n      title: item.title,\r\n      source: item.source || 'News',\r\n      publishedAt: item.publishedAt || '',\r\n      max_words: 120,\r\n      mode: 'auto',\r\n    };\r\n\r\n    const resp = await fetch(SUMMARIZER_URL, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(payload),\r\n      mode: 'cors',\r\n    });\r\n\r\n    if (!resp.ok) throw new Error(`Summarizer HTTP ${resp.status}`);\r\n    const json = (await resp.json()) as any;\r\n    if (json.error) throw new Error(json.error);\r\n\r\n    const summaryText = cleanText(json.summary ?? json.Summary ?? '');\r\n    const bullets = coerceBullets(json.bullets ?? json.Bullets);\r\n\r\n    box.className = 'summary-box';\r\n    const badge = document.createElement('span');\r\n    badge.className = 'pill';\r\n    badge.textContent = json.from === 'full' ? 'From article' : 'From headline';\r\n\r\n    const titleEl = document.createElement('div');\r\n    titleEl.className = 'summary-title';\r\n    titleEl.textContent = 'Summary';\r\n\r\n    const textEl = document.createElement('div');\r\n    textEl.className = 'summary-text';\r\n    textEl.textContent = summaryText || '(no summary)';\r\n\r\n    box.appendChild(badge);\r\n    box.appendChild(titleEl);\r\n    box.appendChild(textEl);\r\n\r\n    if (bullets.length) {\r\n      const bulletsTitle = document.createElement('div');\r\n      bulletsTitle.className = 'summary-title';\r\n      bulletsTitle.textContent = 'Key Points';\r\n      const list = document.createElement('ul');\r\n      list.className = 'summary-list';\r\n      bullets.forEach((b) => {\r\n        const li = document.createElement('li');\r\n        li.textContent = b;\r\n        list.appendChild(li);\r\n      });\r\n      box.appendChild(bulletsTitle);\r\n      box.appendChild(list);\r\n    }\r\n  } catch (e: any) {\r\n    box.className = 'summary-box';\r\n    box.textContent = `Summary failed: ${e?.message || String(e)}`;\r\n  } finally {\r\n    btn.disabled = false;\r\n    btn.textContent = 'Summarize';\r\n  }\r\n}\r\n\r\n// ================== Finnhub fetch ==================\r\nfunction isoRangeFromDaysBack(days: number): { from: string; to: string } {\r\n  const to = new Date();\r\n  const from = new Date(Date.now() - days * 24 * 60 * 60 * 1000);\r\n  return {\r\n    from: from.toISOString().slice(0, 10),\r\n    to: to.toISOString().slice(0, 10),\r\n  };\r\n}\r\n\r\nasync function fetchFinnhub(symbol: string, key: string, daysBack: number, max: number): Promise<NewsItem[]> {\r\n  if (!isTicker(symbol)) throw new Error('Ticker required, e.g., NVDA');\r\n\r\n  const { from, to } = isoRangeFromDaysBack(daysBack);\r\n  const url = new URL('https://finnhub.io/api/v1/company-news');\r\n  url.searchParams.set('symbol', symbol.trim().toUpperCase());\r\n  url.searchParams.set('from', from);\r\n  url.searchParams.set('to', to);\r\n  url.searchParams.set('token', key);\r\n\r\n  const resp = await fetch(url.toString());\r\n  if (!resp.ok) throw new Error(`Finnhub HTTP ${resp.status}`);\r\n\r\n  const json = (await resp.json()) as any[];\r\n  const items: NewsItem[] = (Array.isArray(json) ? json : []).map((a) => ({\r\n    title: a.headline || '(no title)',\r\n    url: a.url || '#',\r\n    source: a.source || 'News',\r\n    description: a.summary || '',\r\n    publishedAt: a.datetime ? new Date(a.datetime * 1000).toISOString() : new Date().toISOString(),\r\n  }));\r\n\r\n  return items.slice(0, max);\r\n}\r\n\r\n// ================== Search wiring ==================\r\nconst searchButton = document.getElementById('btnStart') as HTMLButtonElement | null;\r\nconst cancelButton = document.getElementById('btnCancel') as HTMLButtonElement | null;\r\nconst tickerInput = document.getElementById('ticker') as HTMLInputElement | null;\r\n\r\nasync function startSearch() {\r\n  clearLog();\r\n\r\n  const key = (keyInput?.value || '').trim();\r\n  const symbol = (tickerInput?.value || '').trim();\r\n  const daysBackSelect = document.getElementById('daysBack') as HTMLSelectElement | null;\r\n  const maxResultsSelect = document.getElementById('maxResults') as HTMLSelectElement | null;\r\n  const dedupeSelect = document.getElementById('dedupe') as HTMLSelectElement | null;\r\n\r\n  const daysBack = parseInt(daysBackSelect?.value || '7', 10);\r\n  const maxResults = parseInt(maxResultsSelect?.value || '100', 10);\r\n  const dedupeMode = (dedupeSelect?.value || 'url') as 'url' | 'title' | 'off';\r\n\r\n  if (!key) {\r\n    setStatus('Paste your Finnhub key and click Save.');\r\n    return;\r\n  }\r\n  if (!symbol) {\r\n    setStatus('Type a ticker, e.g., NVDA.');\r\n    return;\r\n  }\r\n\r\n  setStatus('Fetching company newsâ€¦');\r\n  if (searchButton) searchButton.disabled = true;\r\n  if (cancelButton) cancelButton.disabled = true;\r\n\r\n  try {\r\n    const items = await fetchFinnhub(symbol, key, daysBack, maxResults);\r\n    const deduped = dedupeNews(items, dedupeMode);\r\n    renderNews(deduped);\r\n    setStatus(deduped.length ? '' : 'No results.');\r\n  } catch (e: any) {\r\n    const message = e?.message || String(e);\r\n    setStatus(message);\r\n    appendLog(`Finnhub: ${message}`, 'errtxt');\r\n  } finally {\r\n    if (searchButton) searchButton.disabled = false;\r\n    if (cancelButton) cancelButton.disabled = true;\r\n  }\r\n}\r\n\r\nif (searchButton) {\r\n  searchButton.addEventListener('click', () => {\r\n    void startSearch();\r\n  });\r\n}\r\n\r\nif (tickerInput) {\r\n  tickerInput.addEventListener('keydown', (e) => {\r\n    if (e.key === 'Enter') {\r\n      void startSearch();\r\n    }\r\n  });\r\n}\r\n\r\n// ================== Reddit Trending ==================\r\ninterface TrendingRow {\r\n  rank: number;\r\n  ticker: string;\r\n  name: string;\r\n  mentions: number;\r\n  upvotes: number;\r\n}\r\n\r\nfunction renderTrending(rows: TrendingRow[]): void {\r\n  const host = document.getElementById('trendList');\r\n  if (!host) return;\r\n\r\n  host.innerHTML = '';\r\n  if (!rows.length) {\r\n    host.textContent = 'No trending tickers found.';\r\n    return;\r\n  }\r\n\r\n  const header = document.createElement('div');\r\n  header.className = 'trend-grid trend-header';\r\n  const hRank = document.createElement('div');\r\n  hRank.textContent = '#';\r\n  const hTicker = document.createElement('div');\r\n  hTicker.textContent = 'Ticker';\r\n  const hName = document.createElement('div');\r\n  hName.textContent = 'Name';\r\n  const hMentions = document.createElement('div');\r\n  hMentions.textContent = 'Mentions';\r\n  const hUpvotes = document.createElement('div');\r\n  hUpvotes.textContent = 'Upvotes';\r\n  const hAction = document.createElement('div');\r\n  hAction.textContent = 'Action';\r\n\r\n  header.append(hRank, hTicker, hName, hMentions, hUpvotes, hAction);\r\n  host.appendChild(header);\r\n\r\n  rows.forEach((r) => {\r\n    const row = document.createElement('div');\r\n    row.className = 'trend-row';\r\n\r\n    const cRank = document.createElement('div');\r\n    cRank.textContent = String(r.rank ?? '');\r\n    const cTicker = document.createElement('div');\r\n    cTicker.textContent = r.ticker ?? '';\r\n    const cName = document.createElement('div');\r\n    cName.textContent = r.name ?? '';\r\n    const cMentions = document.createElement('div');\r\n    cMentions.textContent = String(r.mentions ?? '');\r\n    const cUpvotes = document.createElement('div');\r\n    cUpvotes.textContent = String(r.upvotes ?? '');\r\n\r\n    const cAction = document.createElement('div');\r\n    cAction.className = 'trend-actions';\r\n    const btn = document.createElement('button');\r\n    btn.className = 'ghost';\r\n    btn.textContent = 'Open News';\r\n    btn.addEventListener('click', () => {\r\n      if (tickerInput) {\r\n        tickerInput.value = (r.ticker || '').toUpperCase();\r\n        void startSearch();\r\n      }\r\n    });\r\n    cAction.appendChild(btn);\r\n\r\n    row.append(cRank, cTicker, cName, cMentions, cUpvotes, cAction);\r\n    host.appendChild(row);\r\n  });\r\n}\r\n\r\nasync function loadTrending(): Promise<void> {\r\n  const filterSelect = document.getElementById('trendFilter') as HTMLSelectElement | null;\r\n  const limitSelect = document.getElementById('trendLimit') as HTMLSelectElement | null;\r\n  const statusEl = document.getElementById('trendStatus');\r\n  const sourceLabel = document.getElementById('trendSourceLabel');\r\n  const spin = document.getElementById('spinTrend');\r\n  const host = document.getElementById('trendList');\r\n\r\n  const filter = filterSelect?.value || 'all-stocks';\r\n  const limit = parseInt(limitSelect?.value || '25', 10) || 25;\r\n\r\n  if (spin) spin.style.display = 'inline-block';\r\n  if (statusEl) statusEl.textContent = 'Loading Reddit trendingâ€¦';\r\n  if (host) host.innerHTML = '';\r\n\r\n  let source = 'Unknown';\r\n\r\n  try {\r\n    // Try Worker first\r\n    try {\r\n      const qs = new URLSearchParams({ filter, limit: String(limit) });\r\n      const url = `${TRENDING_URL}?${qs.toString()}`;\r\n      const r = await fetch(url, { method: 'GET', mode: 'cors' });\r\n      if (r.ok) {\r\n        const data = (await r.json()) as any;\r\n        source = data.note ? 'ðŸ“Š Demo Data (Worker API failed)' : 'âœ… Reddit';\r\n        if (statusEl) {\r\n          statusEl.textContent = `${data.count} trending tickers â€¢ ${new Date(data.asOf).toLocaleString()}`;\r\n        }\r\n        if (sourceLabel) sourceLabel.textContent = source;\r\n        renderTrending((data.results || []) as TrendingRow[]);\r\n        return;\r\n      }\r\n    } catch (workerError: any) {\r\n      console.log('Worker failed:', workerError?.message || workerError);\r\n    }\r\n\r\n    // Finnhub fallback\r\n    const key = (keyInput?.value || '').trim();\r\n    if (key) {\r\n      try {\r\n        const r = await fetch(`https://finnhub.io/api/v1/news?category=general&limit=${limit}&token=${key}`);\r\n        if (r.ok) {\r\n          const data = (await r.json()) as any[];\r\n          const tickers: Record<string, TrendingRow> = {};\r\n          (data || []).forEach((article) => {\r\n            const headline = String(article.headline || '');\r\n            const matches = headline.match(/\\b[A-Z]{1,5}\\b/g) || [];\r\n            matches.forEach((ticker) => {\r\n              if (!tickers[ticker]) {\r\n                tickers[ticker] = {\r\n                  rank: 0,\r\n                  ticker,\r\n                  name: ticker,\r\n                  mentions: 0,\r\n                  upvotes: 0,\r\n                };\r\n              }\r\n              tickers[ticker].mentions += 1;\r\n            });\r\n          });\r\n\r\n          const results = Object.values(tickers)\r\n            .sort((a, b) => b.mentions - a.mentions)\r\n            .slice(0, limit)\r\n            .map((item, idx) => ({ ...item, rank: idx + 1 }));\r\n\r\n          if (results.length) {\r\n            source = 'âœ… Real Data (Finnhub API)';\r\n            if (statusEl) {\r\n              statusEl.textContent = `${results.length} trending tickers â€¢ ${new Date().toLocaleString()}`;\r\n            }\r\n            if (sourceLabel) sourceLabel.textContent = source;\r\n            renderTrending(results);\r\n            return;\r\n          }\r\n        }\r\n      } catch (e: any) {\r\n        console.log('Finnhub trending failed:', e?.message || e);\r\n      }\r\n    }\r\n\r\n    // Demo fallback\r\n    const mockTrending: TrendingRow[] = [\r\n      { rank: 1, ticker: 'NVDA', name: 'NVIDIA Corp', mentions: 1247, upvotes: 3421 },\r\n      { rank: 2, ticker: 'TSLA', name: 'Tesla Inc', mentions: 1089, upvotes: 2983 },\r\n      { rank: 3, ticker: 'MSFT', name: 'Microsoft Corp', mentions: 956, upvotes: 2654 },\r\n      { rank: 4, ticker: 'AAPL', name: 'Apple Inc', mentions: 847, upvotes: 2341 },\r\n      { rank: 5, ticker: 'AMZN', name: 'Amazon.com Inc', mentions: 743, upvotes: 2015 },\r\n    ].slice(0, limit);\r\n\r\n    source = 'ðŸ“Š Demo Data (No API available)';\r\n    if (statusEl) {\r\n      statusEl.textContent = `${mockTrending.length} trending tickers â€¢ ${new Date().toLocaleString()}`;\r\n    }\r\n    if (sourceLabel) sourceLabel.textContent = source;\r\n    renderTrending(mockTrending);\r\n  } catch (e: any) {\r\n    source = 'ðŸ“Š Demo Data (Error occurred)';\r\n    if (statusEl) {\r\n      statusEl.textContent = `Trending failed: ${e?.message || String(e)}`;\r\n    }\r\n    if (sourceLabel) sourceLabel.textContent = source;\r\n  } finally {\r\n    if (spin) spin.style.display = 'none';\r\n  }\r\n}\r\n\r\nconst trendingButton = document.getElementById('btnTrending') as HTMLButtonElement | null;\r\nif (trendingButton) {\r\n  trendingButton.addEventListener('click', () => {\r\n    void loadTrending();\r\n  });\r\n}\r\n"],"names":["SUMMARIZER_URL","TRENDING_URL","protocol","hostname","host","pathname","search","hash","banner","keyInput","saveButton","pillKey","setKeyPill","text","ok","stored","v","setStatus","message","statusEl","setCount","n","countEl","isTicker","q","niceTime","iso","d","appendLog","msg","cls","logEl","div","clearLog","decodeEntities","str","txt","cleanText","raw","s","maybe","cleanBullet","b","coerceBullets","x","anyRaw","vals","dedupeNews","items","mode","out","seen","it","key","u","renderNews","results","sortSelect","sorted","a","itemDiv","meta","datePill","sourcePill","titleDiv","link","desc","summaryBox","summaryButton","summarizeItem","summaryRow","item","box","btn","payload","resp","json","summaryText","bullets","badge","titleEl","textEl","bulletsTitle","list","li","e","isoRangeFromDaysBack","days","to","fetchFinnhub","symbol","daysBack","max","from","url","searchButton","cancelButton","tickerInput","startSearch","daysBackSelect","maxResultsSelect","dedupeSelect","maxResults","dedupeMode","deduped","renderTrending","rows","header","hRank","hTicker","hName","hMentions","hUpvotes","hAction","r","row","cRank","cTicker","cName","cMentions","cUpvotes","cAction","loadTrending","filterSelect","limitSelect","sourceLabel","spin","filter","limit","source","qs","data","workerError","tickers","article","ticker","idx","mockTrending","trendingButton"],"mappings":"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"}